---
title: AppBarとインタラクション制御
description: この章では、Android 標準の UI コンポーネントである AppBar と、インタラクション制御について解説します。
keywords: ["android","training", "基礎", "スキル", "開発", "developer", "プログラミング", "AppBar", "インタラクション制御"]

---

参考：UI デザインとしての[App Bar &#124; Android Developers](https://material.google.com/layout/structure.html#structure-app-bar)  
参考：プログラミングとしての[App Bar &#124; Android Developers](https://developer.android.com/training/appbar/index.html)


## 目次

- [ActionBar](#ActionBar)
  - [ActionBar の基本](#ActionBar の基本)
  - [NavigationMode](#NavigationMode)
  - [ActionItem](#ActionItem)
  - [App Icon Navigation](#App Icon Navigation)
  - [Split ActionBar](#Split ActionBar)
  - [ActionView](#ActionView)
  - [ActionBarSherlock](#ActionBarSherlock)
- [インタラクション制御](#インタラクション制御)
  - [Activity や Fragment のコールバックメソッド](#Activity や Fragment のコールバックメソッド)
  - [View の状態を監視する方法](#View の状態を監視する方法)

## AppBar
AppBar（Android での以前の名称はActionBar）は、ブランド表示、ナビゲーション、検索、各種操作などを配置できる特殊なツールバーです。  
AppBarの左側にあるナビゲーション アイコンは次のように使用できます。

- ナビゲーション ドロワーを開くためのコントロールにする。
- アプリ内の上の階層に移動するための上矢印にする。
- 現在の画面でナビゲーションが必要なければ表示しない。

![AppBar]({{site.baseurl}}/assets/02-05/layout_structure_appbar_structure1.png)

AppBarのタイトルは現在のページによって変わり、アプリのタイトル、ページのタイトル、ページのフィルタなどになります。

AppBarの右側にあるアイコンは、アプリに関連する操作です。メニューアイコンではオーバーフロー メニューが開いて、ヘルプ、設定、フィードバックなどの補助的な操作やメニュー項目が表示されます。

## Toolbar
Toolbarは、高さやレイアウトを汎用的に変えられるコンポーネントです。  
ヘッダー部分だけに使われるとは限りません。  
![]({{site.baseurl}}/assets/02-05/layout_structure_toolbars5.png)
![]({{site.baseurl}}/assets/02-05/layout_structure_toolbars7.png)

## 実習・課題

### ActionBar

1. (実習) 実習用プロジェクトが、libraries/ActionBarSherlock を参照するように設定してください
2. (実習) 1. で設定したプロジェクトで、ActionBar の TabNavigation を実現し、3 つのタブを持つ画面を作成してください
3. (実習) TabNavigation で、タブを選択された時に、どのタブが選択されたかを`Toast`で表示するようにしてください（プロジェクトは実習1, 2 のものを利用する）
4. (課題) 新しい Activity を作成し、その Activity の中で App Icon Navigation を有効にした上で、階層を戻るボタンとしての役割を実装してください
5. (課題) 3 つのタブと、2 つの ActionItem を持つ ActionBar を MainActivity に実装してください。ActionItem のうち、片方は新しい Activity を起動するように、もう片方は MainActivity を終了するようにイベントをハンドリングしてください。

### インタラクション制御

1. (実習) OptionsMenu に、以下の 3 つの項目を表示し、それぞれ選択時に、どのメニューが選択されたかを`Toast`で表示するようにしてください
  * Settings と表示するもの
  * Login と表示するもの
  * Refresh と表示するもの
2. (実習) ActionBarSherlock を参照する実習用プロジェクトで OptionsMenu を扱った場合の、OptionsMenu の表示のされ方の違いを、エミュレータを用いて、画面の大きさを元に考察してレポートに記述してください（`android:showAsAction`に`withText`をつけると違いが出てきます。）
3. (課題) OptionsMenu に、以下の 2 つの項目を表示し、そのうち一方の項目の有効／無効の状態を交互に切り替える処理を実装してください。
  * Settings と表示するもの
  * Refresh と表示するもの
4. (課題) TextWatcher を利用して、EditText に入力された文字数をカウントする TextView を作成してください。
